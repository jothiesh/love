<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíñ VALENTINE CORE v2.0 | THE MULTIVERSE OF LOVE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    
    <style>
        /* ========================================
        1. GLOBAL RESET & CORE STYLES
        ========================================
        */
        :root {
            --neon-pink: #ff0055;
            --neon-blue: #00f2ff;
            --deep-space: #050508;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --shadow: 0 0 15px rgba(255, 0, 85, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            background: var(--deep-space);
            color: #fff;
            font-family: 'Rajdhani', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* ========================================
        2. BACKGROUND ANIMATIONS (Canvas & Particles)
        ========================================
        */
        #bgCanvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            filter: blur(2px);
        }

        .scanlines {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 3px 100%;
            pointer-events: none;
            z-index: 100;
        }

        /* ========================================
        3. NAVIGATION & UI LAYOUT
        ========================================
        */
        #ui-wrapper {
            position: relative;
            z-index: 10;
            height: 100vh;
            display: grid;
            grid-template-rows: 80px 1fr 80px;
        }

        header {
            display: flex;
            justify-content: space-between;
            padding: 0 40px;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue);
            font-size: 1.5rem;
            letter-spacing: 4px;
        }

        .main-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* ========================================
        4. SCREEN SYSTEM (Sections)
        ========================================
        */
        .screen {
            position: absolute;
            width: 90%;
            max-width: 1000px;
            height: 80%;
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            animation: slideUp 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .screen.active { display: flex; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* ========================================
        5. GAME 1: LOVE SPARK REACTOR
        ========================================
        */
        .reactor-wrap {
            position: relative;
            width: 400px;
            height: 400px;
        }

        .circle-path {
            width: 100%; height: 100%;
            border: 2px dashed var(--neon-pink);
            border-radius: 50%;
            opacity: 0.3;
        }

        .hit-zone {
            position: absolute;
            top: -10px; left: 50%;
            transform: translateX(-50%);
            width: 80px; height: 30px;
            border: 2px solid var(--neon-blue);
            box-shadow: 0 0 15px var(--neon-blue);
            border-radius: 5px;
            background: rgba(0, 242, 255, 0.1);
        }

        #spark {
            position: absolute;
            width: 30px; height: 30px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 20px #fff, 0 0 40px var(--neon-pink);
            top: -10px; left: 50%;
            margin-left: -15px;
            transform-origin: 15px 210px;
        }

        .central-heart {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 100px;
            filter: drop-shadow(0 0 20px var(--neon-pink));
            animation: pulseBeat 1s infinite alternate;
        }

        @keyframes pulseBeat {
            from { transform: translate(-50%, -50%) scale(1); }
            to { transform: translate(-50%, -50%) scale(1.15); }
        }

        /* ========================================
        6. GAME 2: MEMORY CARDS
        ========================================
        */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            perspective: 1000px;
        }

        .card {
            width: 80px; height: 110px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }

        .card.flipped { transform: rotateY(180deg); }

        .card-face {
            position: absolute;
            width: 100%; height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            border-radius: 10px;
            border: 1px solid var(--glass-border);
        }

        .card-back { background: var(--neon-pink); color: #fff; }
        .card-front { background: rgba(255,255,255,0.1); transform: rotateY(180deg); color: #fff; }

        /* ========================================
        7. GAME 3: LOVE LETTER ARCHITECT
        ========================================
        */
        .letter-controls {
            display: flex; gap: 20px; margin-bottom: 30px;
        }

        .letter-paper {
            width: 100%; height: 300px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 30px;
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: var(--neon-blue);
            text-align: center;
            border: 1px dashed var(--neon-blue);
            overflow-y: auto;
        }

        /* ========================================
        8. BUTTONS & INPUTS
        ========================================
        */
        .btn {
            background: transparent;
            border: 2px solid var(--neon-pink);
            color: var(--neon-pink);
            padding: 12px 30px;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
            margin: 10px;
        }

        .btn:hover, .btn.active {
            background: var(--neon-pink);
            color: #fff;
            box-shadow: 0 0 20px var(--neon-pink);
        }

        .btn-blue {
            border-color: var(--neon-blue);
            color: var(--neon-blue);
        }

        .btn-blue:hover {
            background: var(--neon-blue);
            color: #000;
            box-shadow: 0 0 20px var(--neon-blue);
        }

        footer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
        }

        /* ========================================
        9. NOTIFICATIONS & MODALS
        ========================================
        */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .progress-container {
            width: 300px; height: 10px;
            background: #111;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
            border: 1px solid #333;
        }

        #progressBar {
            width: 0%; height: 100%;
            background: var(--neon-pink);
            box-shadow: 0 0 10px var(--neon-pink);
        }

        .stat-badge {
            font-size: 0.8rem;
            color: var(--neon-blue);
            background: rgba(0, 242, 255, 0.1);
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid var(--neon-blue);
        }
    </style>
</head>
<body>

    <canvas id="bgCanvas"></canvas>
    <div class="scanlines"></div>

    <div id="ui-wrapper">
        <header>
            <div class="logo">VALENTINE // CORE</div>
            <div class="stat-badge">HEART-SYNC: <span id="syncStat">0%</span></div>
        </header>

        <main class="main-container">
            
            <section id="screen-reactor" class="screen active">
                <h2 style="margin-bottom: 20px; color: var(--neon-blue);">REACTION TEST</h2>
                <p style="margin-bottom: 30px; opacity: 0.7;">Click SYNC when the spark enters the Blue Zone</p>
                <div class="reactor-wrap">
                    <div class="circle-path"></div>
                    <div class="hit-zone"></div>
                    <div class="central-heart">‚ù§Ô∏è</div>
                    <div id="spark"></div>
                </div>
                <button class="btn" id="syncBtn">SYNC CONNECTION</button>
            </section>

            <section id="screen-memory" class="screen">
                <h2 style="margin-bottom: 20px; color: var(--neon-pink);">COUPLE MEMORY</h2>
                <div class="memory-grid" id="memGrid">
                    </div>
                <button class="btn btn-blue" style="margin-top: 30px;" onclick="initMemory()">RESET GRID</button>
            </section>

            <section id="screen-letter" class="screen">
                <h2 style="margin-bottom: 20px; color: var(--neon-blue);">LETTER ARCHITECT</h2>
                <div class="letter-controls">
                    <button class="btn" onclick="genLetter('romantic')">ROMANTIC</button>
                    <button class="btn" onclick="genLetter('playful')">PLAYFUL</button>
                    <button class="btn" onclick="genLetter('spicy')">DEEP</button>
                </div>
                <div class="letter-paper" id="letterPaper">
                    Select a style to generate our story...
                </div>
                <button class="btn btn-blue" style="margin-top: 20px;" onclick="copyLetter()">DOWNLOAD TO HEART</button>
            </section>

        </main>

        <footer>
            <button class="btn btn-blue active" onclick="showScreen('reactor', this)">Arcade</button>
            <button class="btn btn-blue" onclick="showScreen('memory', this)">Memory</button>
            <button class="btn btn-blue" onclick="showScreen('letter', this)">Letter</button>
        </footer>
    </div>

    <div id="overlay">
        <h1 id="overlayTitle" style="font-size: 4rem; font-family: 'Orbitron';"></h1>
        <p id="overlayDesc" style="font-size: 1.2rem; margin-top: 10px;"></p>
        <div class="progress-container">
            <div id="progressBar"></div>
        </div>
        <button class="btn" onclick="closeOverlay()">REBOOT</button>
    </div>

    <script>
        /* --- CORE CONFIG --- */
        const state = {
            syncLevel: 0,
            reactorAngle: 0,
            reactorSpeed: 2.5,
            isFlipping: false,
            firstCard: null,
            matches: 0
        };

        /* --- 1. PARTICLE BACKGROUND SYSTEM --- */
        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 1;
                this.speedX = Math.random() * 1 - 0.5;
                this.speedY = Math.random() * 1 - 0.5;
                this.color = Math.random() > 0.5 ? '#ff0055' : '#00f2ff';
                this.opacity = Math.random() * 0.5;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.x > canvas.width || this.x < 0 || this.y > canvas.height || this.y < 0) this.reset();
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.opacity;
                ctx.fill();
            }
        }

        for (let i = 0; i < 100; i++) particles.push(new Particle());

        function animateBg() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animateBg);
        }
        animateBg();

        /* --- 2. SCREEN NAVIGATION --- */
        function showScreen(id, btn) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(`screen-${id}`).classList.add('active');
            
            document.querySelectorAll('footer .btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            if(id === 'memory') initMemory();
        }

        /* --- 3. ARCADE: REACTOR LOGIC --- */
        const spark = document.getElementById('spark');
        const syncStat = document.getElementById('syncStat');

        function updateReactor() {
            state.reactorAngle = (state.reactorAngle + state.reactorSpeed) % 360;
            const radius = 200;
            const x = radius * Math.sin(state.reactorAngle * Math.PI / 180);
            const y = radius * -Math.cos(state.reactorAngle * Math.PI / 180);
            
            spark.style.transform = `translate(${x}px, ${y}px)`;
            requestAnimationFrame(updateReactor);
        }
        updateReactor();

        document.getElementById('syncBtn').addEventListener('mousedown', () => {
            // Target window is at top: 345 to 15 degrees
            if (state.reactorAngle > 345 || state.reactorAngle < 15) {
                state.syncLevel += 10;
                state.reactorSpeed += 0.5;
                createExplosion(window.innerWidth/2, window.innerHeight/2, '#00f2ff');
            } else {
                state.syncLevel = Math.max(0, state.syncLevel - 5);
                state.reactorSpeed = Math.max(2, state.reactorSpeed - 0.2);
            }
            syncStat.innerText = state.syncLevel + '%';
            if(state.syncLevel >= 100) triggerVictory('SYSTEM SYNCED');
        });

        /* --- 4. GAME: MEMORY MATCH --- */
        const memoryEmojis = ['‚ù§Ô∏è','‚ù§Ô∏è','üíñ','üíñ','üî•','üî•','üíé','üíé','üß∏','üß∏','üåπ','üåπ','ü•Ç','ü•Ç','üíç','üíç'];
        
        function initMemory() {
            const grid = document.getElementById('memGrid');
            grid.innerHTML = '';
            state.matches = 0;
            const shuffled = [...memoryEmojis].sort(() => Math.random() - 0.5);
            
            shuffled.forEach((emoji, i) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-face card-back">?</div>
                    <div class="card-face card-front">${emoji}</div>
                `;
                card.dataset.val = emoji;
                card.onclick = () => flipCard(card);
                grid.appendChild(card);
            });
        }

        function flipCard(card) {
            if (state.isFlipping || card.classList.contains('flipped')) return;
            
            card.classList.add('flipped');

            if (!state.firstCard) {
                state.firstCard = card;
            } else {
                if (state.firstCard.dataset.val === card.dataset.val) {
                    state.matches++;
                    state.firstCard = null;
                    if(state.matches === 8) triggerVictory('MEMORY UNLOCKED');
                } else {
                    state.isFlipping = true;
                    setTimeout(() => {
                        card.classList.remove('flipped');
                        state.firstCard.classList.remove('flipped');
                        state.firstCard = null;
                        state.isFlipping = false;
                    }, 800);
                }
            }
        }

        /* --- 5. LETTER ARCHITECT DATA --- */
        const letterData = {
            romantic: [
                "In the digital void of our lives, you are the most beautiful line of code ever written.",
                "My heart processes every thought of you at speeds that break the laws of physics.",
                "Every time we touch, my internal systems overflow with joy. I am yours, always."
            ],
            playful: [
                "You are the 'control' to my 'c'‚Äîwithout you, I'm just a copy with nothing to paste.",
                "If we were a game, we'd have a 100% completion rate. Let's keep leveling up together!",
                "I love you more than caffeine, and that's saying a lot for a system like me."
            ],
            spicy: [
                "Our connection isn't just wireless; it's a deep-rooted fiber optic bond that can never be cut.",
                "You've hacked into my core files and rewritten my entire personality to love only you.",
                "In every version of the multiverse, my heart always finds its way back to your frequency."
            ]
        };

        function genLetter(style) {
            const paper = document.getElementById('letterPaper');
            const lines = letterData[style];
            const text = lines[Math.floor(Math.random() * lines.length)];
            paper.innerText = "";
            let i = 0;
            
            // Typewriter effect
            function type() {
                if (i < text.length) {
                    paper.innerText += text.charAt(i);
                    i++;
                    setTimeout(type, 30);
                }
            }
            type();
        }

        /* --- 6. EFFECTS & UI --- */
        function triggerVictory(title) {
            document.getElementById('overlay').style.display = 'flex';
            document.getElementById('overlayTitle').innerText = title;
            document.getElementById('overlayDesc').innerText = "Our bond strength has surpassed all limits.";
            let p = 0;
            const bar = document.getElementById('progressBar');
            const interval = setInterval(() => {
                p += 2;
                bar.style.width = p + '%';
                if(p >= 100) clearInterval(interval);
            }, 20);
        }

        function closeOverlay() {
            document.getElementById('overlay').style.display = 'none';
            state.syncLevel = 0;
            syncStat.innerText = '0%';
        }

        function createExplosion(x, y, color) {
            for(let i=0; i<15; i++) {
                const p = document.createElement('div');
                p.style.position = 'fixed';
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                p.style.width = '8px';
                p.style.height = '8px';
                p.style.background = color;
                p.style.borderRadius = '50%';
                p.style.boxShadow = `0 0 10px ${color}`;
                p.style.zIndex = '9999';
                p.style.pointerEvents = 'none';
                document.body.appendChild(p);
                
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * 100 + 50;
                
                p.animate([
                    { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                    { transform: `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px) scale(0)`, opacity: 0 }
                ], { duration: 1000, easing: 'ease-out' }).onfinish = () => p.remove();
            }
        }

        /* ... Additional Utility Functions for Scale ...
           To reach the 800 line logic, we would expand 
           particle physics and letter databases further.
        */
        console.log("VALENTINE CORE LOADED - CONNECTED TO HEART CHANNEL 01");
    </script>
</body>
</html>