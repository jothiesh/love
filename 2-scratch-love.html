<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ« Scratch & Win My Heart</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap');
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Nunito',sans-serif;background:linear-gradient(135deg,#ffecd2,#fcb69f);min-height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:20px}
        h1{color:#e74c3c;margin-bottom:10px;font-size:1.8rem}
        .subtitle{color:#666;margin-bottom:30px}
        .card{background:#fff;border-radius:20px;padding:30px;box-shadow:0 20px 50px rgba(0,0,0,0.15);text-align:center;max-width:320px}
        .scratch-container{position:relative;width:260px;height:150px;margin:20px auto;border-radius:15px;overflow:hidden;border:3px solid #e74c3c}
        .hidden-message{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#ff6b9d,#ff8e9e);display:flex;align-items:center;justify-content:center;flex-direction:column;color:#fff}
        .hidden-message h2{font-size:1.8rem;margin-bottom:5px}
        .hidden-message p{font-size:1rem}
        #scratchCanvas{position:absolute;top:0;left:0;cursor:crosshair;border-radius:12px}
        .hint{margin-top:20px;color:#888;font-size:0.9rem}
        .sparkle{position:fixed;pointer-events:none;font-size:20px;animation:sparkle 1s forwards}
        @keyframes sparkle{to{transform:translateY(-50px) scale(0);opacity:0}}
        .result{display:none;margin-top:20px}
        .result.show{display:block;animation:popIn 0.5s}
        @keyframes popIn{from{transform:scale(0)}to{transform:scale(1)}}
        .result p{color:#e74c3c;font-size:1.1rem;line-height:1.6}
        .emoji-rain{position:fixed;font-size:25px;animation:rain 3s linear forwards;pointer-events:none}
        @keyframes rain{to{transform:translateY(100vh);opacity:0}}
    </style>
</head>
<body>
    <div class="card">
        <h1>ğŸ« Lucky Love Card</h1>
        <p class="subtitle">Scratch to reveal your prize!</p>
        <div class="scratch-container">
            <div class="hidden-message">
                <h2>ğŸ’– I LOVE YOU!</h2>
                <p>You won my heart forever!</p>
            </div>
            <canvas id="scratchCanvas" width="260" height="150"></canvas>
        </div>
        <p class="hint">ğŸ‘† Scratch with your finger or mouse!</p>
        <div class="result" id="result">
            <p>ğŸ‰ Congratulations! You're the luckiest person because you have my heart! ğŸ’•</p>
        </div>
    </div>
    <script>
        const canvas=document.getElementById('scratchCanvas');
        const ctx=canvas.getContext('2d');
        let isDrawing=false;
        let scratched=0;
        
        // Draw scratch surface
        ctx.fillStyle='#c0c0c0';
        ctx.fillRect(0,0,260,150);
        ctx.fillStyle='#a0a0a0';
        ctx.font='bold 18px Nunito';
        ctx.textAlign='center';
        ctx.fillText('ğŸ SCRATCH HERE ğŸ',130,80);
        
        function scratch(x,y){
            ctx.globalCompositeOperation='destination-out';
            ctx.beginPath();
            ctx.arc(x,y,20,0,Math.PI*2);
            ctx.fill();
            // Sparkle effect
            if(Math.random()>0.7){
                const s=document.createElement('div');
                s.className='sparkle';
                s.textContent='âœ¨';
                s.style.left=x+canvas.offsetLeft+'px';
                s.style.top=y+canvas.offsetTop+'px';
                document.body.appendChild(s);
                setTimeout(()=>s.remove(),1000);
            }
            checkProgress();
        }
        
        function checkProgress(){
            const imageData=ctx.getImageData(0,0,260,150);
            let transparent=0;
            for(let i=3;i<imageData.data.length;i+=4){
                if(imageData.data[i]===0)transparent++;
            }
            const percent=transparent/(260*150)*100;
            if(percent>50&&!document.getElementById('result').classList.contains('show')){
                document.getElementById('result').classList.add('show');
                celebrate();
            }
        }
        
        function celebrate(){
            const emojis=['ğŸ’•','ğŸ’–','â¤ï¸','ğŸ’—','ğŸ‰','âœ¨'];
            for(let i=0;i<30;i++){
                setTimeout(()=>{
                    const e=document.createElement('div');
                    e.className='emoji-rain';
                    e.textContent=emojis[Math.floor(Math.random()*emojis.length)];
                    e.style.left=Math.random()*100+'vw';
                    e.style.top='-30px';
                    document.body.appendChild(e);
                    setTimeout(()=>e.remove(),3000);
                },i*100);
            }
        }
        
        canvas.addEventListener('mousedown',()=>isDrawing=true);
        canvas.addEventListener('mouseup',()=>isDrawing=false);
        canvas.addEventListener('mousemove',e=>{if(isDrawing)scratch(e.offsetX,e.offsetY)});
        canvas.addEventListener('touchstart',e=>{e.preventDefault();isDrawing=true});
        canvas.addEventListener('touchend',()=>isDrawing=false);
        canvas.addEventListener('touchmove',e=>{
            e.preventDefault();
            const touch=e.touches[0];
            const rect=canvas.getBoundingClientRect();
            scratch(touch.clientX-rect.left,touch.clientY-rect.top);
        });
    </script>
</body>
</html>
